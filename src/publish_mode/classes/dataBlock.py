import flet as ft
from ...variables import variables

class dataBlock(ft.Row):
    def __init__(self, file_picker):
        super().__init__()

        self.controls = [
            ft.ListTile(
                leading = ft.Image(
                    src_base64="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMTAyNCIKICAgaGVpZ2h0PSIxMDI0IgogICB2aWV3Qm94PSIwIDAgMjcwLjkzMzMzIDI3MC45MzMzMyIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMSIKICAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS4zLjIgKDA5MWUyMGVmMGYsIDIwMjMtMTEtMjUpIgogICBzb2RpcG9kaTpkb2NuYW1lPSJibGFua19ub3RlLnN2ZyIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMDAwMDAwIgogICAgIGJvcmRlcm9wYWNpdHk9IjAuMjUiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2QxZDFkMSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0ibW0iCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6em9vbT0iMC41MDcwOTIxOCIKICAgICBpbmtzY2FwZTpjeD0iNDc1LjI1ODc1IgogICAgIGlua3NjYXBlOmN5PSI1MDMuODUzMTYiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMTEiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiPjxzb2RpcG9kaTpndWlkZQogICAgICAgcG9zaXRpb249IjAsMjcwLjkzMzMzIgogICAgICAgb3JpZW50YXRpb249IjAsMTAyNCIKICAgICAgIGlkPSJndWlkZTEiCiAgICAgICBpbmtzY2FwZTpsb2NrZWQ9ImZhbHNlIiAvPjxzb2RpcG9kaTpndWlkZQogICAgICAgcG9zaXRpb249IjI3MC45MzMzMywyNzAuOTMzMzMiCiAgICAgICBvcmllbnRhdGlvbj0iMTAyNCwwIgogICAgICAgaWQ9Imd1aWRlMiIKICAgICAgIGlua3NjYXBlOmxvY2tlZD0iZmFsc2UiIC8+PHNvZGlwb2RpOmd1aWRlCiAgICAgICBwb3NpdGlvbj0iMjcwLjkzMzMzLDAiCiAgICAgICBvcmllbnRhdGlvbj0iMCwtMTAyNCIKICAgICAgIGlkPSJndWlkZTMiCiAgICAgICBpbmtzY2FwZTpsb2NrZWQ9ImZhbHNlIiAvPjxzb2RpcG9kaTpndWlkZQogICAgICAgcG9zaXRpb249IjAsMCIKICAgICAgIG9yaWVudGF0aW9uPSItMTAyNCwwIgogICAgICAgaWQ9Imd1aWRlNCIKICAgICAgIGlua3NjYXBlOmxvY2tlZD0iZmFsc2UiIC8+PGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJncmlkNCIKICAgICAgIHVuaXRzPSJtbSIKICAgICAgIG9yaWdpbng9IjAiCiAgICAgICBvcmlnaW55PSIwIgogICAgICAgc3BhY2luZ3g9IjAuOTk5OTk5OTkiCiAgICAgICBzcGFjaW5neT0iMC45OTk5OTk5OSIKICAgICAgIGVtcGNvbG9yPSIjMDA5OWU1IgogICAgICAgZW1wb3BhY2l0eT0iMC4zMDE5NjA3OCIKICAgICAgIGNvbG9yPSIjMDA5OWU1IgogICAgICAgb3BhY2l0eT0iMC4xNDkwMTk2MSIKICAgICAgIGVtcHNwYWNpbmc9IjUiCiAgICAgICBkb3R0ZWQ9ImZhbHNlIgogICAgICAgZ3JpZGFuZ2xleD0iMzAiCiAgICAgICBncmlkYW5nbGV6PSIzMCIKICAgICAgIHZpc2libGU9InRydWUiIC8+PC9zb2RpcG9kaTpuYW1lZHZpZXc+PGRlZnMKICAgICBpZD0iZGVmczEiPjxpbmtzY2FwZTpwYXRoLWVmZmVjdAogICAgICAgZWZmZWN0PSJmaWxsZXRfY2hhbWZlciIKICAgICAgIGlkPSJwYXRoLWVmZmVjdDQiCiAgICAgICBpc192aXNpYmxlPSJ0cnVlIgogICAgICAgbHBldmVyc2lvbj0iMSIKICAgICAgIG5vZGVzYXRlbGxpdGVzX3BhcmFtPSJGLDAsMCwxLDAsMCwwLDEgQCBGLDAsMCwxLDAsMCwwLDEgQCBGLDAsMCwxLDAsMCwwLDEgQCBGLDAsMCwxLDAsMCwwLDEgQCBGLDAsMCwxLDAsMCwwLDEgQCBGLDAsMCwxLDAsMCwwLDEgQCBGLDAsMCwxLDAsMCwwLDEgQCBGLDAsMCwxLDAsNjQuNzIyMjY0LDAsMSBAIEYsMCwwLDEsMCw1MS45NzI0MDUsMCwxIEAgRiwwLDAsMSwwLDUxLjMzNjM4NCwwLDEgQCBGLDAsMCwxLDAsMzguNDE2NzE0LDAsMSBAIEYsMCwwLDEsMCwwLDAsMSBAIEYsMCwwLDEsMCwwLDAsMSIKICAgICAgIHJhZGl1cz0iMCIKICAgICAgIHVuaXQ9InB4IgogICAgICAgbWV0aG9kPSJhdXRvIgogICAgICAgbW9kZT0iRiIKICAgICAgIGNoYW1mZXJfc3RlcHM9IjEiCiAgICAgICBmbGV4aWJsZT0iZmFsc2UiCiAgICAgICB1c2Vfa25vdF9kaXN0YW5jZT0idHJ1ZSIKICAgICAgIGFwcGx5X25vX3JhZGl1cz0idHJ1ZSIKICAgICAgIGFwcGx5X3dpdGhfcmFkaXVzPSJ0cnVlIgogICAgICAgb25seV9zZWxlY3RlZD0iZmFsc2UiCiAgICAgICBoaWRlX2tub3RzPSJmYWxzZSIgLz48L2RlZnM+PGcKICAgICBpbmtzY2FwZTpsYWJlbD0i0KHQu9C+0LkgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPjxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojNjI2MjYyO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDo1LjI5MTY3O2ZpbGwtb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3Q0IgogICAgICAgd2lkdGg9IjI3MC45MzMzMiIKICAgICAgIGhlaWdodD0iMjcwLjkzMzMyIgogICAgICAgeD0iMCIKICAgICAgIHk9IjAiCiAgICAgICByeT0iMCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJCYWNrIiAvPjxwYXRoCiAgICAgICBkPSJtIDQwMCwtMTIwIGMgLTQ0LDAgLTgxLjY2NjY3LC0xNS42NjY2NyAtMTEzLC00NyAtMzEuMzMzMzMsLTMxLjMzMzMzIC00NywtNjkgLTQ3LC0xMTMgMCwtNDQgMTUuNjY2NjcsLTgxLjY2NjY3IDQ3LC0xMTMgMzEuMzMzMzMsLTMxLjMzMzMzIDY5LC00NyAxMTMsLTQ3IDE1LjMzMzMzLDAgMjkuNSwxLjgzMzMzIDQyLjUsNS41IDEzLDMuNjY2NjcgMjUuNSw5LjE2NjY3IDM3LjUsMTYuNSBWIC03NzUuMjc3NzQgQSA2NC43MjIyNjQsNjQuNzIyMjY0IDEzNSAwIDEgNTQ0LjcyMjI2LC04NDAgSCA2NjguMDI3NiBBIDUxLjk3MjQwNSw1MS45NzI0MDUgNDUgMCAxIDcyMCwtNzg4LjAyNzYgdiA1Ni42OTEyMiBBIDUxLjMzNjM4NCw1MS4zMzYzODQgMTM1IDAgMSA2NjguNjYzNjIsLTY4MCBIIDU5OC40MTY3MSBBIDM4LjQxNjcxNCwzOC40MTY3MTQgMTM1IDAgMCA1NjAsLTY0MS41ODMyOSBWIC0yODAgYyAwLDQ0IC0xNS42NjY2Nyw4MS42NjY2NyAtNDcsMTEzIC0zMS4zMzMzMywzMS4zMzMzMyAtNjksNDcgLTExMyw0NyB6IgogICAgICAgaWQ9InBhdGgxIgogICAgICAgaW5rc2NhcGU6cGF0aC1lZmZlY3Q9IiNwYXRoLWVmZmVjdDQiCiAgICAgICBpbmtzY2FwZTpvcmlnaW5hbC1kPSJtIDQwMCwtMTIwIHEgLTY2LDAgLTExMywtNDcgLTQ3LC00NyAtNDcsLTExMyAwLC02NiA0NywtMTEzIDQ3LC00NyAxMTMsLTQ3IDIzLDAgNDIuNSw1LjUgMTkuNSw1LjUgMzcuNSwxNi41IHYgLTQyMiBoIDI0MCB2IDE2MCBIIDU2MCB2IDQwMCBxIDAsNjYgLTQ3LDExMyAtNDcsNDcgLTExMyw0NyB6IgogICAgICAgc3R5bGU9ImZpbGw6Izg5ODk4OTtmaWxsLW9wYWNpdHk6MSIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuMjEyOTk4NywwLDAsMC4yMTI5OTg3LDMzLjIyNzI5LDIzNy43MDYwNCkiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTm90ZSIgLz48L2c+PC9zdmc+Cg==",
                    border_radius=ft.border_radius.all(6),
                    width=50,
                    height=50
                ),
                title=ft.Text(f"{'Select track' if variables.metadata == {} else variables.metadata['track']}"),
                subtitle=ft.Text(f"{'Click to select file' if variables.metadata == {} else variables.metadata['artist']}"),
                trailing=ft.Column(
                    alignment=ft.MainAxisAlignment.START,
                    controls=[
                        ft.Text(f"{'00:00' if variables.metadata == {} else variables.metadata['duration']}", font_family="Google Sans", size=20),
                        ft.Text(f"{'000' if variables.metadata == {} else variables.metadata['duration_s']}", font_family="Google Sans", size=12)
                    ],
                    spacing=1
                ),
                on_click=lambda _: file_picker.pick_files(allow_multiple=False, file_type=ft.FilePickerFileType.AUDIO)
            )
        ]
        self.wrap = True